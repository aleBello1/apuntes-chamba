//////////////////////////////////////////TEORIA///////////////////////////////////////////

checar precios: En la pantalla principal de aws buscar el apartado 'precios'.
	- Ver servicios gratuitos: Click en el apartado 'capa gratuita'.

si se dejan prendidos los servicios, se estarán consumiendo los creditos.

AMI: Amazon machine image. Contiene la configuración de sfotware (SO y aplicaciones)
necesaria para lanzar la instancia.


ZONAS Y REGIONES

El precio de los recursos sí cambia según la región (zona) que elijas. Algunas regiones
suelen tener precios más bajos que otras.

AWS fija distintos precios por región según:
Costos locales de infraestructura y energía
Demanda de clientes en esa región
Costos de operación y logística.

us-east-1 (Virginia) frecuentemente tiene precios más bajos. **************


AMAZON RELATIONAL DATABASE SERVICE (RDS)

Sirve para almcenar nuestras db relaciones como PostgreSQL, MySQL, etc.


ELASTIC COMPUTE CLOUD (EC2)

Es como una vps pero en la nube y de amazon.

Crear una maquina virtual ---------------------------------------------

En los servicios -> buscar el servicio EC2 -> apartado instances (maquina virtual) -> se debe presionar 'lancuh intace' pero antes asegurarse que se tiene seleccionada la zona mas barata del momento.

Seleccionar un SO para la instancia: Dar un nombre a la instancia (esto es opcional) -> Elegir
	un SO linux (preferentemente el de amazon) -> Despues elegir específicamente una que 
	una que sea AMI (no elegir alguna que diga server) (Tambien asegurarse que la que se 	elgia diga: apto para la capa gratuita).

Seleccionar el tipo de instancia: Seleccionar alguno apto para la capa gratuita y el que 
	tenga mas ram.

Configurar la red: Cada zona tiene su propia red conocida como: virtual private cloud (vpc) y 
	también tiene subredes que vendrían a ser las subzonas.
	Se debe habilitar la ip publica para que se pueda acceder a la maquina virtual desde
	fuera, por defcto solo se habilita un solo puerto, el puerto 22 el cual permite
	las conexiónes remotas mediante ssh. ****
	Le damos click en editar -> en subred va sin preferencias -> crear un grupo de seguridad
	-> add security group role -> tipo: tcp personalizado -> numPuertoApp (aquí ponemos cada 	puerto que queremos sea consumible desde afuera, pe si tenemos dos microservicios y uno 	corre en el puerto 5000 y otro en el 8001, abrimos estos dos puertos para que sean 	consumibles desde afuera) -> tipo origen: caulqueir lugar (obvio desde cualquier lugar
	que tenga la contraseña pem).
	Las reglas de seguridad de entrada sirven cuando un alguien quiere consumir algo del 
	ec2 y las reglas de seguridad de salida sirven cuando el ec2 quiere consumir algo de 
	afuera. ***

Crear par de claves: launch instance -> create a new key -> asignar nombre a las claves -> 
	tipo de par de llaves: rsa -> formato de archivo de clave: .pem -> crear par de claves.
	Se descaragara el archivo.
	
Crear instancia:  launch instance -> view intances -> *esperar a que se termine de configurar 
	y levantar la maquina virtual* -> connect 
	-> apartado rdp client -> download remote -> get password -> subir contraseña (que 
	previamente habiamos descargado) -> descrypt password -> copiar password y pegarlo 
	en el software que se descargo.
	-Apagar la maquina virtual: se debe apagar la computadora vitual como normalmente
		se haria (no cerrar la pestaña si no apagarla maquina). Ir al apartado
		instances -> seleccionar la maquina virtual -> actions -> instance
		state -> stop instance (para que no consuma creditos). El detenimiento no
		es inmediato hay que esperar unos minutos. *************


opcional: crear y configurar vpc ------------------------------

Editar la vpc de una instancia: Entrar al servicio ec2 -> apartado izq: panel de ec2 -> 
	grupos de seguridad -> dar click sobre una vpc para poder configuar las reglas de 
	entrada y salida.

En los servicios: VPC -> Lanzar asistente VPC -> apartado izq: VPC con una sola subred
publica -> seleccionar -> bloque de CIDR ipv6: sin bloque de cidr -> dar un nombre en 
nombre VPC -> zona de disponibilidad: elegir el primero ->  crear VPC.

Asociar instancias al VPC: Irse a las intancias -> lanzar instancias x2 -> dar nombre 
en nombre y etiquetas -> un partado inicio rapido: windows -> en configuraciones de red
dar click en editar -> vpc obligatorio: sleccionar la vpc que creamos -> en sured tambien
-> asignar automaticamente: habilitar -> dar nombre en nombre del guro de seguridad, 
copiarlo y pegarlo como prefijo al nombre de descripcion (dejando la fecha) -> apartado
par de claves: crear nuevo par de claves -> apartaod derecho -> numero de instancias: 2 
-> lanzar instancias
 
Otras configuraciones ---------------------------------------

Ver estado de las instancias: Entrar al servicio ec2 -> apartado izq: panel de ec2 -> instancias
	en ejecución.
	Si se selecciona determinada instancia
	- apartado detalles -> veremos ciertos detalles de la instancia: dirección ipv4 publica,
		dns de ipv4 publica (con estas dos direcciones podemos conectarnos a la 			instancia tanto a la terminal asi como lanzar peticiones utsando 
		postman***************), etc.
	- apartado seguridad: Veremos que reglas de entrada y salida tiene esa instancia.

Editar reglas de seguridad de una instancia: Entrar al servicio ec2 -> apartado izq: panel de 	ec2 -> instancias en ejecución -> seleccionar determinada instancia -> apartado 
	seguridad -> click sobre grupos de seguridad.
	- apartado reglas de entrada -> editar reglas de entrada.
	- apartado reglas de salida -> editar reglas de salida.

	

Conectarse a la maquina remota (por ssh) ------------------------

°°°°°°°°°° Utilizndo Windows °°°°°°°°°°

Hay varias maneras pero Desde Windows la mejor opción es utilizando putty.
En la pagina de aws poner en el buscador putty para mostrar la documentación de como conectarse
a la maquina remota usando putty.

Entrar al servicio ec2 -> apartado izq: panel de ec2 -> instancias en ejecución -> seleccionar
	determinada instancia -> buscar y presionar el button conectar -> *en un futuro mejorar
	esta parte *

°°°°°°°°°° Utilizando Linux °°°°°°°°°°

Hay varias maneras y una de ellas seria usando una mv con Oracle box que simule una terminal
de Linux.
Otra manera es buscando en Windows a wsl (estará instalado si usamos Docker porque Docker lo
usa forsozamente).


Opcional: Preparación e instalación de Docker -----------------------

Al conectarnos a la MV deberemos actualizar todos los paquetes con: sudo yum update -y

sudo amazon-linux-extras install Docker ó
sudo yum install Docker -> Instala Docker en la MV.

sudo service Docker start -> Levanta el servicio de Docker.

Después instalamos Docker compose, para ello buscar en la pagina oficial de Docker compose
los comandos para instalar Docker compose en una maquina virutal 'Linux standalone binary'.

*Desde la terminal local*
scp -i /ruta/nombreArhivoPem.pem rutaMHost/nombreArchivo.entenxion 
	instance-user-name@instance-public-dns-name rutaMV/ -> Para copiar un archivo desde 
		la maquina local y pegarlo en la maquina remota.
		La idea es copiar y pegar el archivo Docker compose. *
	- instance-user-name: Es el nombre algun usuario dentro de una instancia EC2.
		Por defecto siempre se creara un usuario llamado 'ec2-user'.
	- instance-public-dns-name: Entrar al detalle de una EC2 y en donde diga 'DNS de ipv4
		publica'.

Con esto ya podriamos correr el Docker compose sin problemas. Todos los comandos de Docker se 
deben usar con sudo. *
Pudiese darse el caso de que al usar los comandos se nos arrje el mensaje: 'out of memory' el 
cual implica que estamos al borde de ocupar toda la memoria ram que tiene disponible nuestra
instancia y por tanto ya no obtendremos resultados en nuestros comandos. En ese caso la solución
seria usar un escalamiento horizontal.

*En la maquina vi4rtual*
free -> Nos muestra una tabla donde se ve la memoria ram* total ocupada y disponible.
	Conforme se van levantando los contenedores van ocupando mas y mas meoria, para 
	monitorear la memoria se ocupa este comando.

Para probar con postman que los microservicios, servicios o apps están corriendo usarimos 
como hostname la dns publica y el puerto pertinente: 'dns-publica:puertoApp'.***


DYNAMO DB

Sirve para almcenar nuestras db no relaciones 


ELASTIC CONTAINER SERVICE (ECS)

Servicio para desplegar contendores.


*Cambiar este nombre*
////////////////////////////////////////////JAVA////////////////////////////////////////////
*por*
/////////////////////////////IMPLEMENTACION DEL DESPLIGUE DE SPRING BOOT////////////////////////





